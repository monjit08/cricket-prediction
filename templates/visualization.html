{% extends 'base.html' %}

{% block content %}

  <h1>visualization</h1>

  <script>
    function convert_to_list(data){
      teams=data['teams']; 
      team_list=[]
      val_list=[]
      for (team in teams){
        team_list.push(team);
        val_list.push(teams[team]);
      }

      return [team_list, val_list]
    }

    function get_match_winners(){
      url='api/match_winners';
      $.get(url, function(data){console.log(convert_to_list(data))});      
    }

    function get_season_match_winners(season){
      url='api/season_match_winners/'+season
      $.get(url, function(data){console.log(convert_to_list(data))});
    }

    function get_match_played(){
      url='api/match_played'
      $.get(url, function(data){console.log(convert_to_list(data))});

    }

    function get_season_match_played(season){
      url='api/season_match_played/'+season
      $.get(url, function(data){console.log(convert_to_list(data))});
    }

    function get_moms(){
      url='api/max_moms'
      $.get(url, function(data){console.log(convert_to_list(data))});
    }
  </script>

<div id="container" style="width:100%; height:400px;"></div>

<br><br><br><br><br><br><br><br>

<div id="container2" style="width:100%; height:400px;"></div>

<br><br><br><br><br><br><br><br>


<div id="pie" style="width:100%; height:400px;"></div>
<script>
  
  document.addEventListener('DOMContentLoaded', function () {
  
    url='api/match_winners';
    $.get(url, function(data){
      teams_list=convert_to_list(data);
      teams=teams_list[0];
      values=teams_list[1];
  
      var myChart = Highcharts.chart('container', {
        chart: {
            type: 'column'
        },
        title: {
            text: 'Matches Won By Each Team Over the Years'
        },
        xAxis: {
            categories: teams
        },
        yAxis: {
            title: {
                text: 'Matches won'
            }
        },
        series: [{
          data: values
        }]
      });
    });
  });

  document.addEventListener('DOMContentLoaded', function () {
  
    url='api/max_moms'
    $.get(url, function(data){
      moms_list=convert_to_list(data);
      moms=moms_list[0];
      values=moms_list[1];
  
      var myChart = Highcharts.chart('container2', {
        chart: {
            type: 'column'
        },
        title: {
            text: 'Maximum Man of the Match Awards Won'
        },
        xAxis: {
            categories: moms
        },
        yAxis: {
            title: {
                text: 'Awards Won'
            }
        },
        series: [{
          data: values
        }]
      });
    });
  });

  document.addEventListener('DOMContentLoaded', function () {
        var myChart = Highcharts.chart('pie', {
            chart: {
                type: 'pie'
            },
            title: {
                text: 'Fruit Consumption'
            },
            xAxis: {
                categories: ['Apples', 'Bananas', 'Oranges']
            },
            yAxis: {
                title: {
                    text: 'Fruit eaten'
                }
            },
            series: [{
              data: [{
            name: 'Chrome',
            y: 61.41,
            sliced: true,
            selected: true
        }, {
            name: 'Internet Explorer',
            y: 11.84
        }, {
            name: 'Firefox',
            y: 10.85
        }, {
            name: 'Edge',
            y: 4.67
        }, {
            name: 'Safari',
            y: 4.18
        }, {
            name: 'Sogou Explorer',
            y: 1.64
        }, {
            name: 'Opera',
            y: 1.6
        }, {
            name: 'QQ',
            y: 1.2
        }, {
            name: 'Other',
            y: 2.61
        }]
            }]
        });
    });

</script>



{% endblock content %}